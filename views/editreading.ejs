<% layout("layouts/boilerplate") %>

<div class="container">
  <h1 class="page-title">
    <i class="bi bi-pencil-square me-2"></i>Edit Crop Reading
  </h1>
  
  <div class="form-container">
    <form id="cropForm" action="/farm/editreading/<%= record.id %>?_method=PUT" method="POST">
      <input type="hidden" name="_id" value="<%= record.id %>">
      
      <div class="mb-4">
        <label class="form-label fw-bold" for="name">
          <i class="bi bi-seedling me-2 text-success"></i>Plant Name
        </label>
        <input type="text" id="name" name="name" class="form-control" value="<%= record.name %>" required>
      </div>
      
      <div class="mb-4">
        <label class="form-label fw-bold" for="batch_no">
          <i class="bi bi-hash me-2 text-primary"></i>Batch Number
        </label>
        <input type="text" id="batch_no" name="batch_no" class="form-control" value="<%= record.batch_no %>" required>
      </div>
      
      <div class="mb-4">
        <label class="form-label fw-bold" for="datetime">
          <i class="bi bi-calendar-event me-2 text-info"></i>Date & Time
        </label>
        <input type="datetime-local" id="datetime" name="datetime" class="form-control" value="<%= record.datetime %>" required>
      </div>
      
      <div class="row">
        <div class="col-md-4 mb-4">
          <label class="form-label fw-bold" for="ph">
            <i class="bi bi-droplet me-2 text-info"></i>pH Value
          </label>
          <input type="number" step="0.1" id="ph" name="ph" class="form-control" value="<%= record.ph %>" required>
        </div>
        
        <div class="col-md-4 mb-4">
          <label class="form-label fw-bold" for="ec">
            <i class="bi bi-lightning me-2 text-warning"></i>EC Level
          </label>
          <input type="number" step="0.1" id="ec" name="ec" class="form-control" value="<%= record.ec %>" required>
        </div>
        
        <div class="col-md-4 mb-4">
          <label class="form-label fw-bold" for="temperature">
            <i class="bi bi-thermometer-half me-2 text-danger"></i>Temperature (Â°C)
          </label>
          <input type="number" step="0.1" id="temperature" name="temperature" class="form-control" value="<%= record.temperature %>" required>
        </div>
      </div>
      
      <div class="mb-4">
        <label class="form-label fw-bold" for="photo">
          <i class="bi bi-camera me-2 text-secondary"></i>Plant Photo (Optional)
        </label>
        <input type="file" id="photo" name="photo" class="form-control" accept="image/*">
        <% if (record.photo) { %>
          <div class="mt-3">
            <small class="text-muted">Current Photo:</small>
            <div class="mt-2">
              <img src="/uploads/<%= record.photo %>" alt="Current Photo" class="img-thumbnail" style="max-width: 200px;">
            </div>
          </div>
        <% } %>
      </div>
      
      <div class="d-flex gap-2">
        <button type="submit" class="btn btn-success flex-fill">
          <i class="bi bi-check-circle me-2"></i>Save Changes
        </button>
        <a href="/farm" class="btn btn-outline-secondary flex-fill">
          <i class="bi bi-x-circle me-2"></i>Cancel
        </a>
      </div>
    </form>
  </div>
</div>